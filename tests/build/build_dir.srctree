PYTHON setup.py build_ext --inplace
PYTHON -c "import a"
PYTHON check_paths.py

######## setup.py ########


# TODO: Better interface...
from Cython.Build.Dependencies import cythonize

from distutils.core import setup

setup(
  ext_modules = cythonize("*.pyx", build_dir="scratch"),
)

######## a.pyx ########

cdef extern from "a_helper.h":
    int value
    
assert value == 100

######## a_helper.h ########

int value = 100;

######## check_paths.py ########

import os
assert os.path.exists("scratch/a.c")
assert os.path.exists("scratch/a_helper.h")
assert not os.path.exists("a.c")
